{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from \"@/router\";\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Login\",\n  components: {},\n  rules: {\n    username: [{\n      required: true,\n      message: '请输入用户名',\n      trigger: 'blur'\n    }],\n    password: [{\n      required: true,\n      message: '请输入密码',\n      trigger: 'blur'\n    }]\n  },\n  data() {\n    return {\n      form: {\n        state: '0'\n      }\n    };\n  },\n  methods: {\n    login() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          request.post(\"/login/\", this.form).then(res => {\n            if (res.code === '0') {\n              this.$message({\n                type: \"success\",\n                message: \"Login Successfully\"\n              });\n              console.log(JSON.parse(res.data));\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data)); // 缓存用户信息\n              // 登录成功的时候更新当前路由\n              // activeRouter()\n              if (this.form.state == 0) {\n                //User\n                router.push(\"/booking\");\n              } else {\n                router.push(\"/movies\"); //Admin\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              });\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["router","request","name","components","rules","username","required","message","trigger","password","data","form","state","methods","login","$refs","validate","valid","post","then","res","code","$message","type","console","log","JSON","parse","sessionStorage","setItem","stringify","push","msg"],"sources":["/Users/ning/it26/it26/VUE/src/views/Login.vue"],"sourcesContent":["<template>\n  <div\n      style=\"width: 400px; margin: 60px auto\"\n      class=\"flex flex-col justify-center items-center inline-flex\"\n      :style=\"{boxShadow: '--el-box-shadow-dark',}\"\n  >\n    <el-tabs type=\"border-card\">\n      <div style=\"margin: 10px; font-size: large; font-weight: bold; text-align: center\">\n        Movie Ticket Online Ordering System\n      </div>\n\n      <el-form\n          :label-position=\"'top'\"\n          label-width=\"100px\"\n          ref=\"form\"\n          :model=\"form\"\n          style=\"margin-top: 50px; max-width: 460px;\"\n      >\n        <el-form-item label=\"Username\">\n          <el-input v-model=\"form.name\" />\n        </el-form-item>\n        <el-form-item label=\"Password\">\n          <el-input v-model=\"form.password\" />\n        </el-form-item>\n        <el-form-item style=\" padding-left: 150px; padding-top: 10px\">\n          <el-button color='black' type=\"primary\" @click=\"login\">\n            Login\n          </el-button>\n        </el-form-item>\n        <el-form-item style=\"margin-left: 110px\">\n          <div style=\"width: 100%\">Don't have a Account?</div>\n          <el-link style=\"margin-left: 40px\" type=\"primary\" @click=\"$router.push('/register')\">Sign up</el-link>\n        </el-form-item>\n        <el-form-item style=\"margin-left: 100px\">\n          <el-radio-group v-model=\"form.state\" class=\"ml-4\" size=\"small\">\n            <el-radio label=\"0\" border >User</el-radio>\n            <el-radio label=\"1\" border >Admin</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n    </el-tabs>\n  </div>\n</template>\n\n<script>\nimport router from \"@/router\";\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Login\",\n  components: {},\n  rules: {\n    username: [\n      {required: true, message: '请输入用户名', trigger: 'blur'},\n    ],\n    password: [\n      {required: true, message: '请输入密码', trigger: 'blur'},\n    ],\n  },\n  data() {\n    return {\n      form:\n          {\n            state: '0',\n          }\n      ,\n    }\n  },\n  methods: {\n    login () {\n      this.$refs['form'].validate((valid) => {\n        if (valid) {\n          request.post(\"/login/\", this.form).then(res => {\n            if (res.code === '0') {\n              this.$message({\n                type: \"success\",\n                message: \"Login Successfully\"\n              })\n              console.log(JSON.parse(res.data))\n              sessionStorage.setItem(\"user\", JSON.stringify(res.data))  // 缓存用户信息\n              // 登录成功的时候更新当前路由\n              // activeRouter()\n              if (this.form.state == 0) {  //User\n                router.push(\"/booking\")\n              } else {\n                router.push(\"/movies\")  //Admin\n              }\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              })\n            }\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>"],"mappings":";AA6CA,OAAOA,MAAK,MAAO,UAAU;AAC7B,OAAOC,OAAM,MAAO,iBAAiB;AACrC,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,UAAU,EAAE,CAAC,CAAC;EACdC,KAAK,EAAE;IACLC,QAAQ,EAAE,CACR;MAACC,QAAQ,EAAE,IAAI;MAAEC,OAAO,EAAE,QAAQ;MAAEC,OAAO,EAAE;IAAM,CAAC,CACrD;IACDC,QAAQ,EAAE,CACR;MAACH,QAAQ,EAAE,IAAI;MAAEC,OAAO,EAAE,OAAO;MAAEC,OAAO,EAAE;IAAM,CAAC;EAEvD,CAAC;EACDE,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EACA;QACEC,KAAK,EAAE;MACT;IAEN;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,KAAIA,CAAA,EAAK;MACP,IAAI,CAACC,KAAK,CAAC,MAAM,CAAC,CAACC,QAAQ,CAAEC,KAAK,IAAK;QACrC,IAAIA,KAAK,EAAE;UACThB,OAAO,CAACiB,IAAI,CAAC,SAAS,EAAE,IAAI,CAACP,IAAI,CAAC,CAACQ,IAAI,CAACC,GAAE,IAAK;YAC7C,IAAIA,GAAG,CAACC,IAAG,KAAM,GAAG,EAAE;cACpB,IAAI,CAACC,QAAQ,CAAC;gBACZC,IAAI,EAAE,SAAS;gBACfhB,OAAO,EAAE;cACX,CAAC;cACDiB,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,KAAK,CAACP,GAAG,CAACV,IAAI,CAAC;cAChCkB,cAAc,CAACC,OAAO,CAAC,MAAM,EAAEH,IAAI,CAACI,SAAS,CAACV,GAAG,CAACV,IAAI,CAAC,GAAG;cAC1D;cACA;cACA,IAAI,IAAI,CAACC,IAAI,CAACC,KAAI,IAAK,CAAC,EAAE;gBAAG;gBAC3BZ,MAAM,CAAC+B,IAAI,CAAC,UAAU;cACxB,OAAO;gBACL/B,MAAM,CAAC+B,IAAI,CAAC,SAAS,GAAG;cAC1B;YACF,OAAO;cACL,IAAI,CAACT,QAAQ,CAAC;gBACZC,IAAI,EAAE,OAAO;gBACbhB,OAAO,EAAEa,GAAG,CAACY;cACf,CAAC;YACH;UACF,CAAC;QACH;MACF,CAAC;IACH;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}