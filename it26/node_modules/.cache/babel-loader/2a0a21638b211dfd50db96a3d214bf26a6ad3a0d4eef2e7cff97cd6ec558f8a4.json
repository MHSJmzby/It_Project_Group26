{"ast":null,"code":"import request from \"@/utils/request\";\nimport router from \"@/router\";\nexport default {\n  name: \"HistoryOrder\",\n  components: {},\n  data() {\n    return {\n      search: '',\n      pageSize: 1,\n      currentPage: 4,\n      Dialogrefund: false,\n      total: 10,\n      entity: {},\n      tableData: []\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/historyorder/\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.data;\n        this.total = res.data.total;\n      });\n    },\n    refund(row) {\n      this.Dialogrefund = true;\n      console.log(row.name);\n      request.delete(\"/historyorder/\" + row.name + \"/\").then(res => {\n        if (res.code === '0') {\n          this.$message({\n            type: \"success\",\n            message: \"Refund Successfully!\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n        this.load(); //刷新表格内容\n        this.Dialogrefund = false;\n      });\n    },\n    confirm() {\n      this.load(); //刷新表格内容\n      this.Dialogrefund = false;\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n};","map":{"version":3,"names":["request","router","name","components","data","search","pageSize","currentPage","Dialogrefund","total","entity","tableData","created","load","methods","get","params","pageNum","then","res","console","log","refund","row","delete","code","$message","type","message","msg","confirm","handleSizeChange","handleCurrentChange"],"sources":["/Users/ning/it26/it26/VUE/src/views/Userviews/HistoryOrder.vue"],"sourcesContent":["<template>\n  <!--    OrderTable   -->\n  <div style=\"padding: 10px; width: 100%;\">\n    <!--    <span style=\"font-size: xx-large; font-weight: bold\">History Order</span>-->\n    <!--    Search   -->\n    <div style=\"display: flex\">\n      <div style=\"width: 600px;\">\n        <el-input v-model=\"search\" placeholder=\"Please input Movie name\"  style=\"width: 300px\" clearable />\n        <el-button style=\"margin: 10px\" plain>Search</el-button>\n      </div>\n    </div>\n\n    <div style=\"padding: 10px;\">\n      <el-table :data=\"tableData \">\n        <el-table-column type=\"index\" align=\"center\" />\n        <el-table-column type=\"expand\" >\n          <template #default=\"props\">\n            <div m=\"4\" style=\"padding: 10px;\">\n              <h3>Description</h3>\n              <p m=\"t-0 b-2\">Movie: {{ props.row.name }}</p>\n              <p m=\"t-0 b-2\">Actor: {{ props.row.actor }}</p>\n              <p m=\"t-0 b-2\">Introduction: {{ props.row.introduction }}</p>\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"Movie\" prop=\"filmName\" sortable/>\n        <el-table-column label=\"Date\" prop=\"time\" align=\"center\" sortable/>\n        <el-table-column label=\"Position\" prop=\"screen\" align=\"center\" />\n        <el-table-column label=\"Price\" prop=\"price\" align=\"center\"/>\n        <el-table-column label=\"State\" prop=\"state\" align=\"center\"/>\n        <el-table-column label=\"Operations\" align=\"center\" >\n          <template #default=\"scope\">\n            <el-button size=\"small\" type=\"danger\" @click=\"refund(scope.row)\">Refund</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <div style=\"margin: 10px\">\n      <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[1, 3, 5, 7]\"\n          :small=\"false\"\n          :disabled=\"false\"\n          :background=\"false\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"10\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n\n      <el-dialog\n          v-model=\"Dialogrefund\"\n          title=\"Tips\"\n          width=\"30%\"\n          align-center\n      >\n        <span>Do you confirm the refund?</span>\n        <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"confirm\">\n            Confirm\n          </el-button>\n          <el-button @click=\"Dialogrefund = false\">Cancel</el-button>\n        </span>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\nimport router from \"@/router\";\n\nexport default {\n  name: \"HistoryOrder\",\n\n  components: {},\n  data() {\n    return {\n      search: '',\n      pageSize: 1,\n      currentPage: 4,\n      Dialogrefund: false,\n      total: 10,\n      entity: {},\n      tableData: [],\n    }\n\n\n  },\n  created() {\n    this.load()\n  },\n\n  methods: {\n    load() {\n      request.get(\"/historyorder/\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n        }\n\n      }).then(res => {\n        console.log(res)\n        this.tableData = res.data\n        this.total = res.data.total\n      })\n    },\n    refund(row) {\n      this.Dialogrefund = true\n      console.log(row.name)\n      request.delete(\"/historyorder/\" + row.name + \"/\").then(res => {\n        if(res.code === '0')\n        {\n          this.$message({\n            type: \"success\",\n            message: \"Refund Successfully!\"\n          })\n        }\n        else\n        {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          })\n        }\n        this.load()   //刷新表格内容\n        this.Dialogrefund = false\n      })\n    },\n    confirm()\n    {\n      this.load()   //刷新表格内容\n      this.Dialogrefund = false\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load()\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AA0EA,OAAOA,OAAM,MAAO,iBAAiB;AACrC,OAAOC,MAAK,MAAO,UAAU;AAE7B,eAAe;EACbC,IAAI,EAAE,cAAc;EAEpBC,UAAU,EAAE,CAAC,CAAC;EACdC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,CAAC;MACXC,WAAW,EAAE,CAAC;MACdC,YAAY,EAAE,KAAK;MACnBC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,CAAC,CAAC;MACVC,SAAS,EAAE;IACb;EAGF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,IAAI,EAAC;EACZ,CAAC;EAEDC,OAAO,EAAE;IACPD,IAAIA,CAAA,EAAG;MACLb,OAAO,CAACe,GAAG,CAAC,gBAAgB,EAAE;QAC5BC,MAAM,EAAE;UACNC,OAAO,EAAE,IAAI,CAACV,WAAW;UACzBD,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBD,MAAM,EAAE,IAAI,CAACA;QACf;MAEF,CAAC,CAAC,CAACa,IAAI,CAACC,GAAE,IAAK;QACbC,OAAO,CAACC,GAAG,CAACF,GAAG;QACf,IAAI,CAACR,SAAQ,GAAIQ,GAAG,CAACf,IAAG;QACxB,IAAI,CAACK,KAAI,GAAIU,GAAG,CAACf,IAAI,CAACK,KAAI;MAC5B,CAAC;IACH,CAAC;IACDa,MAAMA,CAACC,GAAG,EAAE;MACV,IAAI,CAACf,YAAW,GAAI,IAAG;MACvBY,OAAO,CAACC,GAAG,CAACE,GAAG,CAACrB,IAAI;MACpBF,OAAO,CAACwB,MAAM,CAAC,gBAAe,GAAID,GAAG,CAACrB,IAAG,GAAI,GAAG,CAAC,CAACgB,IAAI,CAACC,GAAE,IAAK;QAC5D,IAAGA,GAAG,CAACM,IAAG,KAAM,GAAG,EACnB;UACE,IAAI,CAACC,QAAQ,CAAC;YACZC,IAAI,EAAE,SAAS;YACfC,OAAO,EAAE;UACX,CAAC;QACH,OAEA;UACE,IAAI,CAACF,QAAQ,CAAC;YACZC,IAAI,EAAE,OAAO;YACbC,OAAO,EAAET,GAAG,CAACU;UACf,CAAC;QACH;QACA,IAAI,CAAChB,IAAI,EAAC,EAAI;QACd,IAAI,CAACL,YAAW,GAAI,KAAI;MAC1B,CAAC;IACH,CAAC;IACDsB,OAAOA,CAAA,EACP;MACE,IAAI,CAACjB,IAAI,EAAC,EAAI;MACd,IAAI,CAACL,YAAW,GAAI,KAAI;IAC1B,CAAC;IACDuB,gBAAgBA,CAACzB,QAAQ,EAAE;MACzB,IAAI,CAACA,QAAO,GAAIA,QAAO;MACvB,IAAI,CAACO,IAAI,EAAC;IACZ,CAAC;IACDmB,mBAAmBA,CAACf,OAAO,EAAE;MAC3B,IAAI,CAACA,OAAM,GAAIA,OAAM;MACrB,IAAI,CAACJ,IAAI,EAAC;IACZ;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}