{"ast":null,"code":"import request from \"@/utils/request\";\nimport router from \"@/router\";\nexport default {\n  name: \"HistoryOrder\",\n  components: {},\n  data() {\n    return {\n      search: '',\n      pageSize: 1,\n      currentPage: 4,\n      Dialogrefund: false,\n      total: 10,\n      entity: {},\n      tableData: [{\n        uuid: 1,\n        date: '2022-05-03',\n        name: 'Titanic',\n        actor: 'Jack',\n        introduction: 'Romantic Movie',\n        position: 'Screen1',\n        price: 39,\n        state: 'Unused'\n      }, {\n        uuid: 2,\n        name: 'Avatar2',\n        date: '2022-05-02',\n        actor: 'Alsa',\n        introduction: 'Good',\n        position: 'Screen2',\n        price: 39,\n        state: 'Watching'\n      }, {\n        uuid: 3,\n        name: 'Spider man',\n        date: '2022-05-04',\n        actor: 'Simon',\n        introduction: 'Cool',\n        position: 'Screen3',\n        price: 59,\n        state: 'Finish'\n      }, {\n        uuid: 4,\n        name: 'Romantic',\n        date: '2022-05-01',\n        actor: 'Wendy',\n        introduction: 'Love',\n        position: 'Screen2',\n        price: 39,\n        state: 'Finish'\n      }]\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/historyorder\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.data.record;\n        this.total = res.data.total;\n      });\n    },\n    refund(id) {\n      this.Dialogrefund = true;\n      console.log(id);\n      request.delete(\"/historyorder/\" + id).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            type: \"success\",\n            message: \"Refund Successfully!\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n        this.load(); //刷新表格内容\n        this.Dialogrefund = false;\n      });\n    },\n    confirm() {\n      this.tableData;\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n};","map":{"version":3,"names":["request","router","name","components","data","search","pageSize","currentPage","Dialogrefund","total","entity","tableData","uuid","date","actor","introduction","position","price","state","created","load","methods","get","params","pageNum","then","res","console","log","record","refund","id","delete","code","$message","type","message","msg","confirm","handleSizeChange","handleCurrentChange"],"sources":["/Users/ning/it26/it26/VUE/src/views/Userviews/HistoryOrder.vue"],"sourcesContent":["<template>\n  <!--    OrderTable   -->\n  <div style=\"padding: 10px; width: 100%;\">\n<!--    <span style=\"font-size: xx-large; font-weight: bold\">History Order</span>-->\n    <!--    Search   -->\n    <div style=\"display: flex\">\n      <div style=\"width: 600px;\">\n          <el-input v-model=\"search\" placeholder=\"Please input Movie name\"  style=\"width: 300px\" clearable />\n          <el-button style=\"margin: 10px\" plain @click=\"search\">Search</el-button>\n      </div>\n    </div>\n\n    <div style=\"padding: 10px;\">\n    <el-table :data=\"tableData \">\n      <el-table-column type=\"index\" align=\"center\" />\n      <el-table-column type=\"expand\" >\n        <template #default=\"props\">\n          <div m=\"4\" style=\"padding: 10px;\">\n            <h3>Description</h3>\n            <p m=\"t-0 b-2\">Movie: {{ props.row.name }}</p>\n            <p m=\"t-0 b-2\">Actor: {{ props.row.actor }}</p>\n            <p m=\"t-0 b-2\">Introduction: {{ props.row.introduction }}</p>\n          </div>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"ID\" prop=\"uuid\" sortable/>\n      <el-table-column label=\"Movie\" prop=\"name\" sortable/>\n      <el-table-column label=\"Date\" prop=\"date\" align=\"center\" sortable/>\n      <el-table-column label=\"Position\" prop=\"position\" align=\"center\" />\n      <el-table-column label=\"Price\" prop=\"price\" align=\"center\"/>\n      <el-table-column label=\"State\" prop=\"state\" align=\"center\"/>\n      <el-table-column label=\"Operations\" align=\"center\" >\n        <template #default=\"scope\">\n          <el-button size=\"small\" type=\"danger\" @click=\"refund(scope.row.uuid)\">Refund</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    </div>\n\n    <div style=\"margin: 10px\">\n      <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[1, 3, 5, 7]\"\n          :small=\"false\"\n          :disabled=\"false\"\n          :background=\"false\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n\n      <el-dialog\n          v-model=\"Dialogrefund\"\n          title=\"Tips\"\n          width=\"30%\"\n          align-center\n      >\n<!--        <el-dialog title=\"回复信息\" v-model=\"dialogFormVisible\" width=\"30%\">-->\n          <el-form :model=\"entity\" label-width=\"80px\">\n            <el-form-item label=\"内容\">\n              <el-input v-model=\"entity.reply\" autocomplete=\"off\" type=\"textarea\" :rows=\"3\"></el-input>\n            </el-form-item>\n          </el-form>\n          <template #footer>\n            <el-button @click=\"cancel\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"reply\">确 定</el-button>\n          </template>\n<!--        </el-dialog>-->\n<!--        <span>Do you confirm the refund?</span>-->\n<!--        <template #footer #default=\"scope\">-->\n<!--        <span class=\"dialog-footer\">-->\n<!--&lt;!&ndash;          <template #default=\"scope\">&ndash;&gt;-->\n<!--            <el-button type=\"primary\" @click=\"confirm\">-->\n<!--              Confirm-->\n<!--            </el-button>-->\n<!--            <el-button @click=\"Dialogrefund = false\">Cancel</el-button>-->\n<!--&lt;!&ndash;          </template>&ndash;&gt;-->\n<!--        </span>-->\n<!--        </template>-->\n      </el-dialog>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport request from \"@/utils/request\";\nimport router from \"@/router\";\n\nexport default {\n  name: \"HistoryOrder\",\n\n  components: {},\n  data() {\n    return {\n      search: '',\n      pageSize: 1,\n      currentPage: 4,\n      Dialogrefund: false,\n      total: 10,\n      entity: {},\n      tableData: [\n        {\n          uuid: 1,\n          date: '2022-05-03',\n          name: 'Titanic',\n          actor: 'Jack',\n          introduction: 'Romantic Movie',\n          position: 'Screen1',\n          price: 39,\n          state: 'Unused',\n        },\n        {\n          uuid: 2,\n          name: 'Avatar2',\n          date: '2022-05-02',\n          actor: 'Alsa',\n          introduction: 'Good',\n          position: 'Screen2',\n          price: 39,\n          state: 'Watching',\n        },\n        {\n          uuid: 3,\n          name: 'Spider man',\n          date: '2022-05-04',\n          actor: 'Simon',\n          introduction: 'Cool',\n          position: 'Screen3',\n          price: 59,\n          state: 'Finish',\n        },\n        {\n          uuid: 4,\n          name: 'Romantic',\n          date: '2022-05-01',\n          actor: 'Wendy',\n          introduction: 'Love',\n          position: 'Screen2',\n          price: 39,\n          state: 'Finish',\n        },\n      ]\n    }\n\n\n  },\n  created() {\n    this.load()\n  },\n\n  methods: {\n    load() {\n      request.get(\"/historyorder\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n        }\n\n      }).then(res => {\n        console.log(res)\n        this.tableData = res.data.record\n        this.total = res.data.total\n      })\n    },\n    refund(id) {\n      this.Dialogrefund = true\n      console.log(id)\n      request.delete(\"/historyorder/\" + id).then(res => {\n        if(res.code === '0')\n        {\n          this.$message({\n            type: \"success\",\n            message: \"Refund Successfully!\"\n          })\n        }\n        else\n        {\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n          })\n        }\n        this.load()   //刷新表格内容\n        this.Dialogrefund = false\n      })\n    },\n    confirm()\n    {\n      this.tableData\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load()\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}