{"ast":null,"code":"import request from \"@/utils/request\";\nimport router from \"@/router\";\nexport default {\n  name: \"HistoryOrder\",\n  components: {},\n  data() {\n    return {\n      search: '',\n      pageSize: 1,\n      currentPage: 4,\n      Dialogrefund: false,\n      tableData: [{\n        date: '2022-05-03',\n        name: 'Titanic',\n        actor: 'Jack',\n        introduction: 'Romantic Movie',\n        position: 'Screen1',\n        price: 39,\n        state: 'Unused'\n      }, {\n        date: '2022-05-02',\n        name: 'Avatar2',\n        actor: 'Alsa',\n        introduction: 'Good',\n        position: 'Screen2',\n        price: 39,\n        state: 'Watching'\n      }, {\n        date: '2022-05-04',\n        name: 'Spider man',\n        actor: 'Simon',\n        introduction: 'Cool',\n        position: 'Screen3',\n        price: 59,\n        state: 'Finish'\n      }, {\n        date: '2022-05-01',\n        name: 'Romantic',\n        actor: 'Wendy',\n        introduction: 'Love',\n        position: 'Screen2',\n        price: 39,\n        state: 'Finish'\n      }]\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(\"/historyorder\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.data.record;\n        this.total = res.data.total;\n      });\n    },\n    refund() {\n      // if(this.form.id) {\n      //   request.post(\"/movies\", this.form).then(res => {\n      //     console.log(res)\n      // if (res.code ==='0') {\n      this.$message({\n        type: \"success\",\n        message: \"Refund Successfully!\"\n      });\n      // }\n      // else {\n      //   this.$message({\n      //     type:\"error\",\n      //     message: \"res.mss\"\n      //   }\n      // })\n      // }\n    },\n\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n};","map":{"version":3,"names":["request","router","name","components","data","search","pageSize","currentPage","Dialogrefund","tableData","date","actor","introduction","position","price","state","created","load","methods","get","params","pageNum","then","res","console","log","record","total","refund","$message","type","message","handleSizeChange","handleCurrentChange"],"sources":["/Users/ning/it26/it26/src/views/Userviews/HistoryOrder.vue"],"sourcesContent":["<template>\n  <!--    OrderTable   -->\n  <div style=\"padding: 10px; width: 100%; justify-content: left\">\n<!--    <span style=\"font-size: xx-large; font-weight: bold\">History Order</span>-->\n    <!--    Search   -->\n    <div style=\"display: flex\">\n      <div style=\"width: 600px;\">\n          <el-input v-model=\"search\" placeholder=\"Please input Movie name\"  style=\"width: 300px\" clearable />\n          <el-button style=\"margin: 10px\" plain>Search</el-button>\n      </div>\n    </div>\n\n    <div style=\"padding: 10px;\">\n    <el-table :data=\"tableData \">\n      <el-table-column type=\"index\" align=\"center\" />\n      <el-table-column type=\"expand\" >\n        <template #default=\"props\">\n          <div m=\"4\" style=\"padding: 10px;\">\n            <h3>Description</h3>\n            <p m=\"t-0 b-2\">Movie: {{ props.row.name }}</p>\n            <p m=\"t-0 b-2\">Actor: {{ props.row.actor }}</p>\n            <p m=\"t-0 b-2\">Introduction: {{ props.row.introduction }}</p>\n          </div>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"Movie\" prop=\"name\" sortable/>\n      <el-table-column label=\"Date\" prop=\"date\" align=\"center\" sortable/>\n      <el-table-column label=\"Position\" prop=\"position\" align=\"center\" />\n      <el-table-column label=\"Price\" prop=\"price\" align=\"center\"/>\n      <el-table-column label=\"State\" prop=\"state\" align=\"center\"/>\n      <el-table-column label=\"Operations\" align=\"center\" >\n        <template #default=\"scope\">\n          <el-button size=\"small\" type=\"danger\" @click=\"Dialogrefund = true\">Refund</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    </div>\n\n    <div style=\"margin: 10px\">\n      <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[1, 3, 5, 7]\"\n          :small=\"false\"\n          :disabled=\"false\"\n          :background=\"false\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"10\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n\n      <el-dialog\n          v-model=\"Dialogrefund\"\n          title=\"Tips\"\n          width=\"30%\"\n          align-center\n      >\n        <span>Do you confirm the refund?</span>\n        <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"refund\">\n            Confirm\n          </el-button>\n          <el-button @click=\"Dialogrefund = false\">Cancel</el-button>\n        </span>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport request from \"@/utils/request\";\nimport router from \"@/router\";\n\nexport default {\n  name: \"HistoryOrder\",\n\n  components: {\n\n  },\n  data() {\n    return {\n      search: '',\n      pageSize: 1,\n      currentPage: 4,\n      Dialogrefund: false,\n\n      tableData: [\n        {\n          date: '2022-05-03',\n          name: 'Titanic',\n          actor: 'Jack',\n          introduction: 'Romantic Movie',\n          position: 'Screen1',\n          price: 39,\n          state: 'Unused',\n        },\n        {\n          date: '2022-05-02',\n          name: 'Avatar2',\n          actor: 'Alsa',\n          introduction: 'Good',\n          position: 'Screen2',\n          price: 39,\n          state: 'Watching',\n        },\n        {\n          date: '2022-05-04',\n          name: 'Spider man',\n          actor: 'Simon',\n          introduction: 'Cool',\n          position: 'Screen3',\n          price: 59,\n          state: 'Finish',\n        },\n        {\n          date: '2022-05-01',\n          name: 'Romantic',\n          actor: 'Wendy',\n          introduction: 'Love',\n          position: 'Screen2',\n          price: 39,\n          state: 'Finish',\n        },\n      ]\n    }\n\n\n  },\n  created() {\n    this.load()\n  },\n\n  methods: {\n    load() {\n      request.get(\"/historyorder\",{\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n        }\n\n      }).then(res => {\n        console.log(res)\n        this.tableData = res.data.record\n        this.total = res.data.total\n      })\n    },\n    refund() {\n      // if(this.form.id) {\n      //   request.post(\"/movies\", this.form).then(res => {\n      //     console.log(res)\n      // if (res.code ==='0') {\n      this.$message({\n        type: \"success\",\n        message: \"Refund Successfully!\"\n      })\n      // }\n      // else {\n      //   this.$message({\n      //     type:\"error\",\n      //     message: \"res.mss\"\n      //   }\n      // })\n      // }\n    },\n\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load()\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AA2EA,OAAOA,OAAM,MAAO,iBAAiB;AACrC,OAAOC,MAAK,MAAO,UAAU;AAE7B,eAAe;EACbC,IAAI,EAAE,cAAc;EAEpBC,UAAU,EAAE,CAEZ,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,CAAC;MACXC,WAAW,EAAE,CAAC;MACdC,YAAY,EAAE,KAAK;MAEnBC,SAAS,EAAE,CACT;QACEC,IAAI,EAAE,YAAY;QAClBR,IAAI,EAAE,SAAS;QACfS,KAAK,EAAE,MAAM;QACbC,YAAY,EAAE,gBAAgB;QAC9BC,QAAQ,EAAE,SAAS;QACnBC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE;MACT,CAAC,EACD;QACEL,IAAI,EAAE,YAAY;QAClBR,IAAI,EAAE,SAAS;QACfS,KAAK,EAAE,MAAM;QACbC,YAAY,EAAE,MAAM;QACpBC,QAAQ,EAAE,SAAS;QACnBC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE;MACT,CAAC,EACD;QACEL,IAAI,EAAE,YAAY;QAClBR,IAAI,EAAE,YAAY;QAClBS,KAAK,EAAE,OAAO;QACdC,YAAY,EAAE,MAAM;QACpBC,QAAQ,EAAE,SAAS;QACnBC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE;MACT,CAAC,EACD;QACEL,IAAI,EAAE,YAAY;QAClBR,IAAI,EAAE,UAAU;QAChBS,KAAK,EAAE,OAAO;QACdC,YAAY,EAAE,MAAM;QACpBC,QAAQ,EAAE,SAAS;QACnBC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE;MACT,CAAC;IAEL;EAGF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,IAAI,EAAC;EACZ,CAAC;EAEDC,OAAO,EAAE;IACPD,IAAIA,CAAA,EAAG;MACLjB,OAAO,CAACmB,GAAG,CAAC,eAAe,EAAC;QAC1BC,MAAM,EAAE;UACNC,OAAO,EAAE,IAAI,CAACd,WAAW;UACzBD,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBD,MAAM,EAAE,IAAI,CAACA;QACf;MAEF,CAAC,CAAC,CAACiB,IAAI,CAACC,GAAE,IAAK;QACbC,OAAO,CAACC,GAAG,CAACF,GAAG;QACf,IAAI,CAACd,SAAQ,GAAIc,GAAG,CAACnB,IAAI,CAACsB,MAAK;QAC/B,IAAI,CAACC,KAAI,GAAIJ,GAAG,CAACnB,IAAI,CAACuB,KAAI;MAC5B,CAAC;IACH,CAAC;IACDC,MAAMA,CAAA,EAAG;MACP;MACA;MACA;MACA;MACA,IAAI,CAACC,QAAQ,CAAC;QACZC,IAAI,EAAE,SAAS;QACfC,OAAO,EAAE;MACX,CAAC;MACD;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACF,CAAC;;IAEDC,gBAAgBA,CAAC1B,QAAQ,EAAE;MACzB,IAAI,CAACA,QAAO,GAAIA,QAAO;MACvB,IAAI,CAACW,IAAI,EAAC;IACZ,CAAC;IACDgB,mBAAmBA,CAACZ,OAAO,EAAE;MAC3B,IAAI,CAACA,OAAM,GAAIA,OAAM;MACrB,IAAI,CAACJ,IAAI,EAAC;IACZ;EACF;AAEF"},"metadata":{},"sourceType":"module","externalDependencies":[]}